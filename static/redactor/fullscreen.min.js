if(!RedactorPlugins){var RedactorPlugins={}}RedactorPlugins.fullscreen={init:function(){this.fullscreen=false;this.buttonAdd("fullscreen","Fullscreen",$.proxy(this.toggleFullscreen,this));this.buttonSetRight("fullscreen");if(this.opts.fullscreen){this.toggleFullscreen()}},toggleFullscreen:function(){var b;if(!this.fullscreen){this.buttonChangeIcon("fullscreen","normalscreen");this.buttonActive("fullscreen");this.fullscreen=true;if(this.opts.toolbarExternal){this.toolcss={};this.boxcss={};this.toolcss.width=this.$toolbar.css("width");this.toolcss.top=this.$toolbar.css("top");this.toolcss.position=this.$toolbar.css("position");this.boxcss.top=this.$box.css("top")}this.fsheight=this.$editor.height();if(this.opts.iframe){b=this.get()}this.tmpspan=$("<span></span>");this.$box.addClass("redactor_box_fullscreen").after(this.tmpspan);$("body, html").css("overflow","hidden");$("body").prepend(this.$box);if(this.opts.iframe){this.fullscreenIframe(b)}this.fullScreenResize();$(window).resize($.proxy(this.fullScreenResize,this));$(document).scrollTop(0,0);this.focus();this.observeStart()}else{this.buttonRemoveIcon("fullscreen","normalscreen");this.buttonInactive("fullscreen");this.fullscreen=false;$(window).off("resize",$.proxy(this.fullScreenResize,this));$("body, html").css("overflow","");this.$box.removeClass("redactor_box_fullscreen").css({width:"auto",height:"auto"});if(this.opts.iframe){b=this.$editor.html()}this.tmpspan.after(this.$box).remove();if(this.opts.iframe){this.fullscreenIframe(b)}else{this.sync()}var a=this.fsheight;if(this.opts.autoresize){a="auto"}if(this.opts.toolbarExternal){this.$box.css("top",this.boxcss.top);this.$toolbar.css({width:this.toolcss.width,top:this.toolcss.top,position:this.toolcss.position})}if(!this.opts.iframe){this.$editor.css("height",a)}else{this.$frame.css("height",a)}this.$editor.css("height",a);this.focus();this.observeStart()}},fullscreenIframe:function(a){this.$editor=this.$frame.contents().find("body").attr({contenteditable:true,dir:this.opts.direction});if(this.$editor[0]){this.document=this.$editor[0].ownerDocument;this.window=this.document.defaultView||window}this.iframeAddCss();if(this.opts.fullpage){this.setFullpageOnInit(a)}else{this.set(a)}if(this.opts.wym){this.$editor.addClass("redactor_editor_wym")}},fullScreenResize:function(){if(!this.fullscreen){return false}var c=this.$toolbar.height();var b=this.$editor.css("padding-top").replace("px","");var a=$(window).height()-c;this.$box.width($(window).width()-2).height(a+c);if(this.opts.toolbarExternal){this.$toolbar.css({top:"0px",position:"absolute",width:"100%"});this.$box.css("top",c+"px")}if(!this.opts.iframe){this.$editor.height(a-(b*2))}else{setTimeout($.proxy(function(){this.$frame.height(a)},this),1)}this.$editor.height(a)}};